// profile for the Gadi supercomputer at NCI

// Gadi specific parameters
// More info: https://opus.nci.org.au/display/DAE/Nextflow
params {
    pbs_account = false
    whoami = false
}

// Preset use of containers with Singularity
singularity {
    enabled = true
    cacheDir = "/scratch/${params.pbs_account}/${params.whoami}/.nextflow/singularity"
    autoMounts = true
    autoCleanUp = true
    temp = "scratch/${params.pbs_account}/${params.whoami}/containers"
}

process {
    module = 'singularity'
    cache = 'lenient'
    stageInMode = 'symlink'
    executor = 'pbspro'
    project = "${params.pbs_account}"
    storage = "scratch/${params.pbs_account}"
    queue = 'normal'
    
    withName: 'checkInputs' {
	executor = 'local'
	cpus = 1
        time = 10.m
        memory = 2.GB

}
    withName: 'manta' {
	executor = 'pbspro'
	queue = 'normal'
	cpus = 10
        time = '24h'
        memory = '40.GB'
}

    withName: 'rehead_manta' {
        executor = 'local'
}

    withName: 'smoove' {
        executor = 'pbspro'
        queue = 'normal'
        cpus = 4
        time = '24h'
        memory = '10.GB'
}

    withName: 'rehead_smoove' {
        executor = 'local'
}

    withName: 'tiddit_sv' {
        executor = 'pbspro'
        queue = 'normal'
        cpus = 4
        time = '24h'
        memory = '40.GB'

    withName: 'rehead_tiddit' {
        executor = 'local'
}

    withName: 'tiddit_cov' {
        executor = 'pbspro'
        queue = 'normal'
        cpus = 1
        time = '24h'
        memory = '10.GB'
}

    withName: 'survivor_merge' {
        executor = 'pbspro'
        queue = 'normal'
        cpus = 1
        time = '2h'
        memory = '10.GB'
}

    withName: 'annotsv' {
        executor = 'pbspro'
        cpus = 1
	time = '1h'
        memory = '10.GB'

}}}
